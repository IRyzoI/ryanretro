<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Switch + Windows Benchmarks | Ryan Retro</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet"/>
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Roboto:wght@400;700&display=swap" rel="stylesheet">

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Roboto:wght@400;700&display=swap');

    body { font-family: 'Roboto', system-ui, sans-serif; }
    .retro-font { font-family: 'Press Start 2P', cursive; }
    
    .pixel-border { 
      border: 4px solid #000; 
      box-shadow: 8px 8px 0 rgba(0,0,0,0.2); 
    }
    
    .pixel-btn {
      transition: all 0.2s ease;
    }
    .pixel-btn:hover {
      transform: translate(2px, 2px);
      box-shadow: 4px 4px 0 rgba(0,0,0,0.2);
    }

    /* Scrollbar */
    .custom-scrollbar::-webkit-scrollbar { height: 8px; width: 8px; }
    .custom-scrollbar::-webkit-scrollbar-track { background: #1f2937; border-radius: 10px; }
    .custom-scrollbar::-webkit-scrollbar-thumb { background: #4b5563; border-radius: 10px; }
    .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #6b7280; }

    /* Table Specifics */
    .rr-table {
      width: 100%;
      border-collapse: separate; 
      border-spacing: 0;
    }
    .rr-table th {
      position: sticky;
      top: 0;
      z-index: 10;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      font-size: 0.75rem;
      border-bottom: 4px solid #000;
    }
    .rr-table td {
      border-bottom: 1px solid #374151;
      padding: 0.75rem 1rem;
      white-space: nowrap;
    }

    /* Vertical column dividers for all modes */
    .rr-table tbody tr td:not(:first-child) {
      border-left: 1px solid #374151;
    }
    .rr-table tbody tr:last-child td {
      border-bottom: none;
    }
    
    /* Device Header Colors (Subtle backgrounds for headers) */
    .th-device { background-color: #1f2937; color: #fff; vertical-align: bottom; padding: 1rem; }
    
    /* Sortable Headers */
    .rr-table th.sortable { cursor: pointer; user-select: none; }
    .rr-table th.sortable::after { content: ''; margin-left: 5px; opacity: 0.5; }
    .rr-table th.sortable[data-sort-dir="asc"]::after { content: '▲'; }
    .rr-table th.sortable[data-sort-dir="desc"]::after { content: '▼'; }

    /* Highlight best value cell */
    .rr-table td.best-cell {
      background-color: rgba(74, 222, 128, 0.2) !important;
      color: #4ade80;
      font-weight: 700;
      border-left: 2px solid #4ade80;
    }

    /* Runs Great highlight */
    .rr-table td.runs-great {
      background-color: rgba(16, 185, 129, 0.18) !important;
      box-shadow: inset 0 0 0 1px rgba(16, 185, 129, 0.9);
      color: #6ee7b7;
      font-weight: 700;
    }

    /* Mini mode for mobile */
    .mini-mode .rr-table th, 
    .mini-mode .rr-table td {
      padding: 0.5rem 0.5rem;
      font-size: 0.7rem;
    }
    .mini-mode .chipset-label { display: none; }
    
    /* Remove bottom margin from device name in mini mode to save vertical space */
    .mini-mode .rr-table th span.mb-1 { margin-bottom: 0; }

    /* Toggle Button States */
    .toggle-btn.off { opacity: 0.5; filter: grayscale(100%); }
    .toggle-btn.on { opacity: 1; filter: none; border-color: #facc15; color: #facc15; }
  </style>
</head>

<body class="bg-gray-900 text-white min-h-screen flex flex-col">

  <header class="bg-black py-6 border-b border-gray-800">
    <div class="container mx-auto px-4 flex items-center justify-between">
      <a href="/static/index.html" class="flex items-center group">
        <img src="https://huggingface.co/spaces/IRyzoI/RyanRetro/resolve/main/images/ryan%20retro%20logo.png" alt="Ryan Retro Logo" class="w-12 h-12 rounded-full mr-4 border-2 border-transparent group-hover:border-yellow-400 transition-colors">
        <span class="retro-font text-yellow-400 text-lg md:text-xl">RYAN RETRO</span>
      </a>
      
      <a href="/static/index.html" class="text-xs md:text-sm text-gray-400 hover:text-white flex items-center gap-2">
        <i data-feather="arrow-left" class="w-4 h-4"></i> BACK HOME
      </a>
    </div>
  </header>

  <main class="flex-grow py-10 md:py-14">
    <!-- WIDER CONTAINER: now full-width with light padding -->
    <div class="mx-auto w-full max-w-[1900px] px-2 sm:px-4">
      
      <div class="text-center mb-10" data-aos="fade-down">
        <h1 class="retro-font text-3xl md:text-5xl text-yellow-400 mb-4 text-shadow">BENCHMARKS</h1>
        <p class="text-gray-400 text-sm md:text-base max-w-2xl mx-auto">
          Comparing average FPS across popular handhelds. Toggle devices and modes below to compare the power of the Snapdragon chipsets.
        </p>
      </div>

      <div class="bg-gray-800 pixel-border rounded-lg p-6 mb-8" data-aos="fade-up">
        
        <!-- Controls -->
        <div class="flex flex-wrap items-center justify-center gap-3 mb-6 border-b border-gray-700 pb-6">
          <span class="retro-font text-xs text-gray-400 mr-2">SYSTEM:</span>
          <!-- ALL defaults to Yellow -->
          <button class="mode-toggle px-4 py-2 rounded pixel-btn retro-font text-xs bg-yellow-400 text-black shadow-lg ring-2 ring-yellow-300" data-mode="combined">ALL</button>
          <button class="mode-toggle px-4 py-2 rounded pixel-btn retro-font text-xs bg-gray-700 text-gray-300 hover:bg-gray-600" data-mode="switch">SWITCH</button>
          <button class="mode-toggle px-4 py-2 rounded pixel-btn retro-font text-xs bg-gray-700 text-gray-300 hover:bg-gray-600" data-mode="windows">WINDOWS</button>
        </div>

        <div class="flex flex-wrap items-center justify-center gap-2 mb-6">
          <span class="retro-font text-xs text-gray-400 mr-2 w-full md:w-auto text-center md:text-left mb-2 md:mb-0">DEVICES:</span>
          
          <button type="button" class="device-toggle toggle-btn on border border-gray-600 bg-gray-900 px-3 py-2 rounded text-xs font-bold flex items-center gap-2 transition-all" data-col-index="1">
            <span class="w-2 h-2 rounded-full bg-green-500"></span> RP5
          </button>
          <button type="button" class="device-toggle toggle-btn on border border-gray-600 bg-gray-900 px-3 py-2 rounded text-xs font-bold flex items-center gap-2 transition-all" data-col-index="2">
            <span class="w-2 h-2 rounded-full bg-yellow-400"></span> RPG2
          </button>
          <button type="button" class="device-toggle toggle-btn on border border-gray-600 bg-gray-900 px-3 py-2 rounded text-xs font-bold flex items-center gap-2 transition-all" data-col-index="3">
            <span class="w-2 h-2 rounded-full bg-blue-400"></span> Odin 2 Portal
          </button>
          <button type="button" class="device-toggle toggle-btn on border border-gray-600 bg-gray-900 px-3 py-2 rounded text-xs font-bold flex items-center gap-2 transition-all" data-col-index="4">
            <span class="w-2 h-2 rounded-full bg-orange-400"></span> Konkr
          </button>
          <!-- FOLD 7 DISABLED BY DEFAULT -->
          <button type="button" class="device-toggle toggle-btn off border border-gray-700 text-gray-600 px-3 py-2 rounded text-xs font-bold flex items-center gap-2 transition-all" data-col-index="5">
            <span class="w-2 h-2 rounded-full" style="background-color: #374151;"></span> Fold 7
          </button>
          <button type="button" class="device-toggle toggle-btn on border border-gray-600 bg-gray-900 px-3 py-2 rounded text-xs font-bold flex items-center gap-2 transition-all" data-col-index="6">
            <span class="w-2 h-2 rounded-full bg-purple-400"></span> Odin 3
          </button>
          <button type="button" class="device-toggle toggle-btn on border border-gray-600 bg-gray-900 px-3 py-2 rounded text-xs font-bold flex items-center gap-2 transition-all" data-col-index="7">
            <span class="w-2 h-2 rounded-full bg-cyan-400"></span> Steam Deck
          </button>
        </div>

        <div class="flex flex-wrap items-center justify-center gap-3">
          <button id="toggleHighlight" class="px-3 py-1.5 rounded border border-emerald-500 text-emerald-400 hover:bg-emerald-500 hover:text-black transition text-xs font-bold flex items-center gap-2">
            <i data-feather="zap" class="w-3 h-3"></i> Highlight Best
          </button>
          <button id="toggleColorMode" class="px-3 py-1.5 rounded border border-fuchsia-500 text-fuchsia-400 hover:bg-fuchsia-500 hover:text-black transition text-xs font-bold flex items-center gap-2">
            <i data-feather="bar-chart" class="w-3 h-3"></i> Ranking Mode
          </button>
          <!-- Runs Great Button -->
          <button id="toggleRunsGreat" class="px-3 py-1.5 rounded border border-green-400 text-green-300 hover:bg-green-400 hover:text-black transition text-xs font-bold flex items-center gap-2">
            <i data-feather="check-circle" class="w-3 h-3"></i> Runs Great
          </button>
          <!-- NEW: Emoji Mode Button -->
          <button id="toggleEmojiMode" class="px-3 py-1.5 rounded border border-yellow-500 text-yellow-400 hover:bg-yellow-500 hover:text-black transition text-xs font-bold flex items-center gap-2">
            <i data-feather="smile" class="w-3 h-3"></i> Emoji Mode
          </button>
          <button id="toggleMiniMode" class="px-3 py-1.5 rounded border border-sky-500 text-sky-400 hover:bg-sky-500 hover:text-black transition text-xs font-bold flex items-center gap-2">
            <i data-feather="smartphone" class="w-3 h-3"></i> Mini View
          </button>
        </div>
      </div>

      <div id="benchCard" class="bg-gray-800 pixel-border rounded-lg overflow-hidden shadow-2xl" data-aos="fade-up" data-aos-delay="100">
        <!-- WIDER SCROLL WRAPPER -->
        <div class="overflow-x-auto custom-scrollbar w-full">
          
          <!-- Combined Table -->
          <table class="rr-table w-full text-left" data-mode="combined">
            <thead class="bg-black text-yellow-400 retro-font">
              <tr>
                <th class="p-4 min-w-[200px] sortable bg-gray-900 z-20">Game</th>
                <th class="th-device device-col-1 sortable min-w-[140px] text-center border-l border-gray-800">
                  <span class="text-green-400 block mb-1">Retroid Pocket 5</span>
                  <span class="text-[12px] text-gray-500 font-sans chipset-label">865</span>
                </th>
                <th class="th-device device-col-2 sortable min-w-[140px] text-center border-l border-gray-800">
                  <span class="text-yellow-400 block mb-1">Retroid Pocket G2</span>
                  <span class="text-[12px] text-gray-500 font-sans chipset-label">G2 Gen 2</span>
                </th>
                <th class="th-device device-col-3 sortable min-w-[140px] text-center border-l border-gray-800">
                  <span class="text-blue-400 block mb-1">AYN Odin 2 Portal</span>
                  <span class="text-[12px] text-gray-500 font-sans chipset-label">8 Gen 2</span>
                </th>
                <th class="th-device device-col-4 sortable min-w-[140px] text-center border-l border-gray-800">
                  <span class="text-orange-400 block mb-1">Konkr Pocket Fit</span>
                  <span class="text-[12px] text-gray-500 font-sans chipset-label">G3 Gen 3</span>
                </th>
                <th class="th-device device-col-5 sortable min-w-[140px] text-center border-l border-gray-800">
                  <span class="text-pink-400 block mb-1">Samsung Fold 7</span>
                  <span class="text-[12px] text-gray-500 font-sans chipset-label">8 Elite</span>
                </th>
                <th class="th-device device-col-6 sortable min-w-[140px] text-center border-l border-gray-800">
                  <span class="text-purple-400 block mb-1">AYN Odin 3</span>
                  <span class="text-[12px] text-gray-500 font-sans chipset-label">8 Elite</span>
                </th>
                <th class="th-device device-col-7 sortable min-w-[140px] text-center border-l border-gray-800">
                  <span class="text-cyan-400 block mb-1">Steam Deck</span>
                  <span class="text-[12px] text-gray-500 font-sans chipset-label">AMD APU</span>
                </th>
              </tr>
            </thead>
            <tbody class="text-sm font-mono text-gray-300 divide-y divide-gray-700 bg-gray-900">
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">Captain Toad: Treasure Tracker</td>
                <td class="text-center">45</td>
                <td class="text-center">75</td>
                <td class="text-center">80</td>
                <td class="text-center">155</td>
                <td class="text-center">75</td>
                <td class="text-center"></td>
                <td class="text-center"></td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">Cuphead</td>
                <td class="text-center">130</td>
                <td class="text-center">175</td>
                <td class="text-center">-</td>
                <td class="text-center">280</td>
                <td class="text-center">140</td>
                <td class="text-center">318</td>
                <td class="text-center">60</td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">Cyberpunk 2077</td>
                <td class="text-center">-</td>
                <td class="text-center">11</td>
                <td class="text-center">15</td>
                <td class="text-center">16</td>
                <td class="text-center">7</td>
                <td class="text-center">14</td>
                <td class="text-center">30</td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">Donut County</td>
                <td class="text-center">38</td>
                <td class="text-center">80</td>
                <td class="text-center">76</td>
                <td class="text-center">156</td>
                <td class="text-center">75</td>
                <td class="text-center"></td>
                <td class="text-center"></td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">Elden Ring</td>
                <td class="text-center">11</td>
                <td class="text-center">15</td>
                <td class="text-center">19</td>
                <td class="text-center">25</td>
                <td class="text-center">5</td>
                <td class="text-center">30</td>
                <td class="text-center">40</td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">FIFA 18</td>
                <td class="text-center">60</td>
                <td class="text-center">73</td>
                <td class="text-center">86</td>
                <td class="text-center">150</td>
                <td class="text-center">82</td>
                <td class="text-center"></td>
                <td class="text-center"></td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">Golf Story</td>
                <td class="text-center">126</td>
                <td class="text-center">126</td>
                <td class="text-center">175</td>
                <td class="text-center">185</td>
                <td class="text-center">180</td>
                <td class="text-center"></td>
                <td class="text-center"></td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">Gris</td>
                <td class="text-center">61</td>
                <td class="text-center">115</td>
                <td class="text-center">110</td>
                <td class="text-center">260</td>
                <td class="text-center">126</td>
                <td class="text-center"></td>
                <td class="text-center"></td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">GTA V</td>
                <td class="text-center">20</td>
                <td class="text-center">44</td>
                <td class="text-center">47</td>
                <td class="text-center">57</td>
                <td class="text-center">-</td>
                <td class="text-center">67</td>
                <td class="text-center">76</td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">Hades 2</td>
                <td class="text-center">51</td>
                <td class="text-center">67</td>
                <td class="text-center">-</td>
                <td class="text-center">124</td>
                <td class="text-center">105</td>
                <td class="text-center">190</td>
                <td class="text-center">150</td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">Hollow Knight Silksong</td>
                <td class="text-center">80</td>
                <td class="text-center">120</td>
                <td class="text-center">-</td>
                <td class="text-center">190</td>
                <td class="text-center">122</td>
                <td class="text-center">220</td>
                <td class="text-center">250</td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">Megabonk</td>
                <td class="text-center">-</td>
                <td class="text-center">40</td>
                <td class="text-center">-</td>
                <td class="text-center">68</td>
                <td class="text-center">40</td>
                <td class="text-center">90</td>
                <td class="text-center">240</td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">Monster Boy and the Cursed Kingdom</td>
                <td class="text-center">115</td>
                <td class="text-center">100</td>
                <td class="text-center">160</td>
                <td class="text-center">165</td>
                <td class="text-center">120</td>
                <td class="text-center">220</td>
                <td class="text-center">250</td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">Need for Speed Rivals</td>
                <td class="text-center">-</td>
                <td class="text-center">30</td>
                <td class="text-center">30</td>
                <td class="text-center">30</td>
                <td class="text-center">30</td>
                <td class="text-center">30</td>
                <td class="text-center">30</td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">Pokémon Sword (In Battle)</td>
                <td class="text-center">40</td>
                <td class="text-center">70</td>
                <td class="text-center">84</td>
                <td class="text-center">123</td>
                <td class="text-center">95</td>
                <td class="text-center"></td>
                <td class="text-center"></td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">Pokémon Sword (Open Areas)</td>
                <td class="text-center">30</td>
                <td class="text-center">33</td>
                <td class="text-center">50</td>
                <td class="text-center">53</td>
                <td class="text-center">50</td>
                <td class="text-center"></td>
                <td class="text-center"></td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">Skyrim</td>
                <td class="text-center">25</td>
                <td class="text-center">36</td>
                <td class="text-center">57</td>
                <td class="text-center">57</td>
                <td class="text-center">47</td>
                <td class="text-center">57</td>
                <td class="text-center">60</td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">Slay the Spire</td>
                <td class="text-center">110</td>
                <td class="text-center">115</td>
                <td class="text-center">142</td>
                <td class="text-center">145</td>
                <td class="text-center">200</td>
                <td class="text-center"></td>
                <td class="text-center"></td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">Tennis in the Face</td>
                <td class="text-center">124</td>
                <td class="text-center">106</td>
                <td class="text-center">124</td>
                <td class="text-center">124</td>
                <td class="text-center">124</td>
                <td class="text-center"></td>
                <td class="text-center"></td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">The Legend of Zelda: Breath of the Wild</td>
                <td class="text-center">25</td>
                <td class="text-center">41</td>
                <td class="text-center">37</td>
                <td class="text-center">48</td>
                <td class="text-center">38</td>
                <td class="text-center"></td>
                <td class="text-center"></td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">The Legend of Zelda: Echoes of Wisdom</td>
                <td class="text-center">38</td>
                <td class="text-center">35</td>
                <td class="text-center">58</td>
                <td class="text-center">55</td>
                <td class="text-center">-</td>
                <td class="text-center"></td>
                <td class="text-center"></td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">The Legend of Zelda: Tears of the Kingdom</td>
                <td class="text-center">22</td>
                <td class="text-center">35</td>
                <td class="text-center">44</td>
                <td class="text-center">46</td>
                <td class="text-center">-</td>
                <td class="text-center"></td>
                <td class="text-center"></td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">The Witcher 3</td>
                <td class="text-center">14</td>
                <td class="text-center">30</td>
                <td class="text-center">42</td>
                <td class="text-center">35</td>
                <td class="text-center">41</td>
                <td class="text-center"></td>
                <td class="text-center"></td>
              </tr>
            </tbody>
          </table>

          <!-- Switch Only -->
          <table class="rr-table w-full text-left" data-mode="switch" style="display:none;">
            <thead class="bg-black text-red-400 retro-font">
              <tr>
                <th class="p-4 min-w-[200px] sortable bg-gray-900 z-20">Game</th>
                <th class="th-device device-col-1 sortable min-w-[140px] text-center border-l border-gray-800">
                  <span class="text-green-400 block mb-1">Retroid Pocket 5</span>
                  <span class="text-[12px] text-gray-500 font-sans chipset-label">865</span>
                </th>
                <th class="th-device device-col-2 sortable min-w-[140px] text-center border-l border-gray-800">
                  <span class="text-yellow-400 block mb-1">Retroid Pocket G2</span>
                  <span class="text-[12px] text-gray-500 font-sans chipset-label">G2 Gen 2</span>
                </th>
                <th class="th-device device-col-3 sortable min-w-[140px] text-center border-l border-gray-800">
                  <span class="text-blue-400 block mb-1">AYN Odin 2 Portal</span>
                  <span class="text-[12px] text-gray-500 font-sans chipset-label">8 Gen 2</span>
                </th>
                <th class="th-device device-col-4 sortable min-w-[140px] text-center border-l border-gray-800">
                  <span class="text-orange-400 block mb-1">Konkr Pocket Fit</span>
                  <span class="text-[12px] text-gray-500 font-sans chipset-label">G3 Gen 3</span>
                </th>
                <th class="th-device device-col-5 sortable min-w-[140px] text-center border-l border-gray-800">
                  <span class="text-pink-400 block mb-1">Samsung Fold 7</span>
                  <span class="text-[12px] text-gray-500 font-sans chipset-label">8 Elite</span>
                </th>
                <th class="th-device device-col-6 sortable min-w-[140px] text-center border-l border-gray-800">
                  <span class="text-purple-400 block mb-1">AYN Odin 3</span>
                  <span class="text-[12px] text-gray-500 font-sans chipset-label">8 Elite</span>
                </th>
                <th class="th-device device-col-7 sortable min-w-[140px] text-center border-l border-gray-800">
                  <span class="text-cyan-400 block mb-1">Steam Deck</span>
                  <span class="text-[12px] text-gray-500 font-sans chipset-label">AMD APU</span>
                </th>
              </tr>
            </thead>
            <tbody class="text-sm font-mono text-gray-300 divide-y divide-gray-700 bg-gray-900">
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">Captain Toad: Treasure Tracker</td>
                <td class="text-center">45</td>
                <td class="text-center">75</td>
                <td class="text-center">80</td>
                <td class="text-center">155</td>
                <td class="text-center">75</td>
                <td class="text-center"></td>
                <td class="text-center"></td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">Donut County</td>
                <td class="text-center">38</td>
                <td class="text-center">80</td>
                <td class="text-center">76</td>
                <td class="text-center">156</td>
                <td class="text-center">75</td>
                <td class="text-center"></td>
                <td class="text-center"></td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">FIFA 18</td>
                <td class="text-center">60</td>
                <td class="text-center">73</td>
                <td class="text-center">86</td>
                <td class="text-center">150</td>
                <td class="text-center">82</td>
                <td class="text-center"></td>
                <td class="text-center"></td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">Golf Story</td>
                <td class="text-center">126</td>
                <td class="text-center">126</td>
                <td class="text-center">175</td>
                <td class="text-center">185</td>
                <td class="text-center">180</td>
                <td class="text-center"></td>
                <td class="text-center"></td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">Gris</td>
                <td class="text-center">61</td>
                <td class="text-center">115</td>
                <td class="text-center">110</td>
                <td class="text-center">260</td>
                <td class="text-center">126</td>
                <td class="text-center"></td>
                <td class="text-center"></td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">Pokémon Sword (Open Areas)</td>
                <td class="text-center">30</td>
                <td class="text-center">33</td>
                <td class="text-center">50</td>
                <td class="text-center">53</td>
                <td class="text-center">50</td>
                <td class="text-center"></td>
                <td class="text-center"></td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">Pokémon Sword (In Battle)</td>
                <td class="text-center">40</td>
                <td class="text-center">70</td>
                <td class="text-center">84</td>
                <td class="text-center">123</td>
                <td class="text-center">95</td>
                <td class="text-center"></td>
                <td class="text-center"></td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">Slay the Spire</td>
                <td class="text-center">110</td>
                <td class="text-center">115</td>
                <td class="text-center">142</td>
                <td class="text-center">145</td>
                <td class="text-center">200</td>
                <td class="text-center"></td>
                <td class="text-center"></td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">Tennis in the Face</td>
                <td class="text-center">124</td>
                <td class="text-center">106</td>
                <td class="text-center">124</td>
                <td class="text-center">124</td>
                <td class="text-center">124</td>
                <td class="text-center"></td>
                <td class="text-center"></td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">The Legend of Zelda: Breath of the Wild</td>
                <td class="text-center">25</td>
                <td class="text-center">41</td>
                <td class="text-center">37</td>
                <td class="text-center">48</td>
                <td class="text-center">38</td>
                <td class="text-center"></td>
                <td class="text-center"></td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">The Legend of Zelda: Echoes of Wisdom</td>
                <td class="text-center">38</td>
                <td class="text-center">35</td>
                <td class="text-center">58</td>
                <td class="text-center">55</td>
                <td class="text-center">-</td>
                <td class="text-center"></td>
                <td class="text-center"></td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">The Legend of Zelda: Tears of the Kingdom</td>
                <td class="text-center">22</td>
                <td class="text-center">35</td>
                <td class="text-center">44</td>
                <td class="text-center">46</td>
                <td class="text-center">-</td>
                <td class="text-center"></td>
                <td class="text-center"></td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">The Witcher 3</td>
                <td class="text-center">14</td>
                <td class="text-center">30</td>
                <td class="text-center">42</td>
                <td class="text-center">35</td>
                <td class="text-center">41</td>
                <td class="text-center"></td>
                <td class="text-center"></td>
              </tr>
            </tbody>
          </table>

          <!-- Windows Only -->
          <table class="rr-table w-full text-left" data-mode="windows" style="display:none;">
            <thead class="bg-black text-blue-400 retro-font">
              <tr>
                <th class="p-4 min-w-[200px] sortable bg-gray-900 z-20">Game</th>
                <th class="th-device device-col-1 sortable min-w-[140px] text-center border-l border-gray-800">
                  <span class="text-green-400 block mb-1">Retroid Pocket 5</span>
                  <span class="text-[12px] text-gray-500 font-sans chipset-label">865</span>
                </th>
                <th class="th-device device-col-2 sortable min-w-[140px] text-center border-l border-gray-800">
                  <span class="text-yellow-400 block mb-1">Retroid Pocket G2</span>
                  <span class="text-[12px] text-gray-500 font-sans chipset-label">G2 Gen 2</span>
                </th>
                <th class="th-device device-col-3 sortable min-w-[140px] text-center border-l border-gray-800">
                  <span class="text-blue-400 block mb-1">AYN Odin 2 Portal</span>
                  <span class="text-[12px] text-gray-500 font-sans chipset-label">8 Gen 2</span>
                </th>
                <th class="th-device device-col-4 sortable min-w-[140px] text-center border-l border-gray-800">
                  <span class="text-orange-400 block mb-1">Konkr Pocket Fit</span>
                  <span class="text-[12px] text-gray-500 font-sans chipset-label">G3 Gen 3</span>
                </th>
                <th class="th-device device-col-5 sortable min-w-[140px] text-center border-l border-gray-800">
                  <span class="text-pink-400 block mb-1">Samsung Fold 7</span>
                  <span class="text-[12px] text-gray-500 font-sans chipset-label">8 Elite</span>
                </th>
                <th class="th-device device-col-6 sortable min-w-[140px] text-center border-l border-gray-800">
                  <span class="text-purple-400 block mb-1">AYN Odin 3</span>
                  <span class="text-[12px] text-gray-500 font-sans chipset-label">8 Elite</span>
                </th>
                <th class="th-device device-col-7 sortable min-w-[140px] text-center border-l border-gray-800">
                  <span class="text-cyan-400 block mb-1">Steam Deck</span>
                  <span class="text-[12px] text-gray-500 font-sans chipset-label">AMD APU</span>
                </th>
              </tr>
            </thead>
            <tbody class="text-sm font-mono text-gray-300 divide-y divide-gray-700 bg-gray-900">
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">Cuphead</td>
                <td class="text-center">130</td>
                <td class="text-center">175</td>
                <td class="text-center">-</td>
                <td class="text-center">280</td>
                <td class="text-center">140</td>
                <td class="text-center">318</td>
                <td class="text-center">60</td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">Cyberpunk 2077</td>
                <td class="text-center">-</td>
                <td class="text-center">11</td>
                <td class="text-center">15</td>
                <td class="text-center">16</td>
                <td class="text-center">7</td>
                <td class="text-center">14</td>
                <td class="text-center">30</td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">Elden Ring</td>
                <td class="text-center">11</td>
                <td class="text-center">15</td>
                <td class="text-center">19</td>
                <td class="text-center">25</td>
                <td class="text-center">5</td>
                <td class="text-center">30</td>
                <td class="text-center">40</td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">GTA V</td>
                <td class="text-center">20</td>
                <td class="text-center">44</td>
                <td class="text-center">47</td>
                <td class="text-center">57</td>
                <td class="text-center">-</td>
                <td class="text-center">67</td>
                <td class="text-center">76</td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">Hades 2</td>
                <td class="text-center">51</td>
                <td class="text-center">67</td>
                <td class="text-center">-</td>
                <td class="text-center">124</td>
                <td class="text-center">105</td>
                <td class="text-center">190</td>
                <td class="text-center">150</td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">Hollow Knight Silksong</td>
                <td class="text-center">80</td>
                <td class="text-center">120</td>
                <td class="text-center">-</td>
                <td class="text-center">190</td>
                <td class="text-center">122</td>
                <td class="text-center">220</td>
                <td class="text-center">250</td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">Megabonk</td>
                <td class="text-center">-</td>
                <td class="text-center">40</td>
                <td class="text-center">-</td>
                <td class="text-center">68</td>
                <td class="text-center">40</td>
                <td class="text-center">90</td>
                <td class="text-center">240</td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">Monster Boy and the Cursed Kingdom</td>
                <td class="text-center">115</td>
                <td class="text-center">100</td>
                <td class="text-center">160</td>
                <td class="text-center">165</td>
                <td class="text-center">120</td>
                <td class="text-center">220</td>
                <td class="text-center">250</td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">Need for Speed Rivals</td>
                <td class="text-center">-</td>
                <td class="text-center">30</td>
                <td class="text-center">30</td>
                <td class="text-center">30</td>
                <td class="text-center">30</td>
                <td class="text-center">30</td>
                <td class="text-center">30</td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">Skyrim</td>
                <td class="text-center">25</td>
                <td class="text-center">36</td>
                <td class="text-center">57</td>
                <td class="text-center">57</td>
                <td class="text-center">47</td>
                <td class="text-center">57</td>
                <td class="text-center">60</td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">Tomb Raider</td>
                <td class="text-center">-</td>
                <td class="text-center">-</td>
                <td class="text-center">-</td>
                <td class="text-center">-</td>
                <td class="text-center">87</td>
                <td class="text-center">-</td>
                <td class="text-center">148</td>
              </tr>
              <tr class="hover:bg-gray-800 transition-colors even:bg-gray-800/30">
                <td class="font-bold text-white bg-gray-800/50">Traveller’s Rest</td>
                <td class="text-center">-</td>
                <td class="text-center">40</td>
                <td class="text-center">30</td>
                <td class="text-center">50</td>
                <td class="text-center">40</td>
                <td class="text-center">70</td>
                <td class="text-center">78</td>
              </tr>
            </tbody>
          </table>

        </div>
        
        <div class="bg-gray-950 p-4 border-t border-gray-700 flex flex-col md:flex-row justify-between items-center gap-4">
          <div class="flex items-center gap-3 text-xs">
            <span class="text-gray-400">FPS RANKING:</span>
            <div class="flex items-center gap-1"><span class="w-3 h-3 rounded-sm bg-red-500"></span><span class="text-gray-500">Bad</span></div>
            <div class="flex items-center gap-1"><span class="w-3 h-3 rounded-sm bg-orange-400"></span></div>
            <div class="flex items-center gap-1"><span class="w-3 h-3 rounded-sm bg-amber-300"></span></div>
            <div class="flex items-center gap-1"><span class="w-3 h-3 rounded-sm bg-yellow-200"></span><span class="text-gray-500">Mid</span></div>
            <div class="flex items-center gap-1"><span class="w-3 h-3 rounded-sm bg-lime-300"></span></div>
            <div class="flex items-center gap-1"><span class="w-3 h-3 rounded-sm bg-green-400"></span></div>
            <div class="flex items-center gap-1"><span class="w-3 h-3 rounded-sm bg-emerald-400"></span><span class="text-gray-500">Good</span></div>
          </div>
          <div class="text-xs text-gray-500 text-center md:text-right">
            Values represent average FPS. Tested in identical conditions.
          </div>
        </div>
      </div>

    </div>
  </main>

  <footer class="bg-black py-8 mt-auto border-t border-gray-800">
    <div class="container mx-auto px-4 text-center text-gray-500 text-xs retro-font">
      <p class="mb-2">© 2025 RYAN RETRO. ALL RIGHTS RESERVED.</p>
      <a href="mailto:rowdyrake@gmail.com" class="hover:text-yellow-400 transition-colors">CONTACT</a>
    </div>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Initialize AOS
      AOS.init({ once: true, duration: 600 });
      feather.replace();

      const DEVICE_COUNT = 7;

      // State
      let activeMode = 'combined';
      let highlightOn = false;
      let colorModeOn = false;
      let runsGreatOn = false;
      let emojiModeOn = false; // Renamed from emoModeOn
      let miniModeOn = false;
      // FOLD 7 (index 5) is disabled by default
      const columnVisibility = { 1: true, 2: true, 3: true, 4: true, 5: false, 6: true, 7: true };

      // Selectors
      const tables = document.querySelectorAll('.rr-table');
      const modeButtons = document.querySelectorAll('.mode-toggle');
      const deviceButtons = document.querySelectorAll('.device-toggle');
      const highlightBtn = document.getElementById('toggleHighlight');
      const colorBtn = document.getElementById('toggleColorMode');
      const runsBtn = document.getElementById('toggleRunsGreat');
      const emojiBtn = document.getElementById('toggleEmojiMode'); // Renamed button selector
      const miniBtn = document.getElementById('toggleMiniMode');
      const benchCard = document.getElementById('benchCard');

      function getActiveTable() {
        return document.querySelector(`.rr-table[data-mode="${activeMode}"]`);
      }

      function updateTableVisibility() {
        tables.forEach(t => t.style.display = 'none');
        getActiveTable().style.display = 'table';
      }

      function clearEffects() {
        document.querySelectorAll('.best-cell').forEach(el => el.classList.remove('best-cell'));
        document.querySelectorAll('.runs-great').forEach(el => el.classList.remove('runs-great'));
        document.querySelectorAll('.rr-table td').forEach(el => {
          el.style.color = '';
          el.style.fontWeight = '';
          // Restore text if it was replaced by emotional mode
          if (el.dataset.original) {
            el.innerText = el.dataset.original;
            delete el.dataset.original;
          }
        });
      }

      function updateColumnVisibility() {
        tables.forEach(table => {
          const headRow = table.querySelector('thead tr');
          const bodyRows = table.querySelectorAll('tbody tr');

          for (let i = DEVICE_COUNT; i >= 1; i--) {
            const th = headRow.children[i];
            if (th) th.style.display = columnVisibility[i] ? '' : 'none';
          }

          bodyRows.forEach(row => {
            for (let i = DEVICE_COUNT; i >= 1; i--) {
              const td = row.children[i];
              if (td) td.style.display = columnVisibility[i] ? '' : 'none';
            }
          });
        });
        
        if (highlightOn) applyHighlight();
        if (colorModeOn) applyColorMode();
        if (runsGreatOn) applyRunsGreat();
        if (emojiModeOn) applyEmojiMode(); // Renamed function call
      }

      function applyHighlight() {
        clearEffects();
        const table = getActiveTable();
        const rows = table.querySelectorAll('tbody tr');

        rows.forEach(row => {
          let maxVal = -Infinity;
          let cells = [];

          for (let i = 1; i <= DEVICE_COUNT; i++) {
            if (!columnVisibility[i]) continue;
            const cell = row.children[i];
            const val = parseFloat(cell.innerText);
            if (!isNaN(val)) {
              if (val > maxVal) maxVal = val;
              cells.push(cell);
            }
          }

          if (maxVal > 0) {
            cells.forEach(cell => {
              if (parseFloat(cell.innerText) === maxVal) {
                cell.classList.add('best-cell');
              }
            });
          }
        });
      }

      function applyColorMode() {
        clearEffects();
        const table = getActiveTable();
        const rows = table.querySelectorAll('tbody tr');
        
        rows.forEach(row => {
          let vals = [];
          for (let i = 1; i <= DEVICE_COUNT; i++) {
            if (!columnVisibility[i]) continue;
            const val = parseFloat(row.children[i].innerText);
            if (!isNaN(val)) vals.push(val);
          }

          if (vals.length === 0) return;
          const min = Math.min(...vals);
          const max = Math.max(...vals);
          const range = max - min || 1;

          for (let i = 1; i <= DEVICE_COUNT; i++) {
            if (!columnVisibility[i]) continue;
            const cell = row.children[i];
            const val = parseFloat(cell.innerText);
            if (isNaN(val)) continue;

            const t = (val - min) / range;
            if (t < 0.33) {
              cell.style.color = '#f87171';
            } else if (t < 0.66) {
              cell.style.color = '#facc15';
            } else {
              cell.style.color = '#4ade80';
              cell.style.fontWeight = 'bold';
            }
          }
        });
      }

      function applyRunsGreat() {
        clearEffects();
        const table = getActiveTable();
        const rows = table.querySelectorAll('tbody tr');

        rows.forEach(row => {
          const gameName = row.children[0].innerText.trim();
          const demanding = (
            gameName === 'Elden Ring' || 
            gameName === 'Cyberpunk 2077' || 
            gameName === 'Need for Speed Rivals' ||
            gameName === 'Pokémon Sword (Open Areas)' ||
            gameName === 'Pokémon Sword (In Battle)'
          );
          const threshold = demanding ? 30 : 60;

          for (let i = 1; i <= DEVICE_COUNT; i++) {
            if (!columnVisibility[i]) continue;
            const cell = row.children[i];
            const val = parseFloat(cell.innerText);
            if (!isNaN(val) && val >= threshold) {
              cell.classList.add('runs-great');
            }
          }
        });
      }

      function applyEmojiMode() {
        clearEffects(); // Start with clean state
        const table = getActiveTable();
        const rows = table.querySelectorAll('tbody tr');

        rows.forEach(row => {
          // 1. Gather numerical values to find min/max
          let vals = [];
          for (let i = 1; i <= DEVICE_COUNT; i++) {
            if (!columnVisibility[i]) continue;
            const val = parseFloat(row.children[i].innerText);
            if (!isNaN(val)) vals.push(val);
          }

          const minVal = vals.length > 0 ? Math.min(...vals) : null;
          const maxVal = vals.length > 0 ? Math.max(...vals) : null;
          const range = (maxVal !== null && minVal !== null) ? (maxVal - minVal) || 1 : 1;

          // 2. Assign emojis
          for (let i = 1; i <= DEVICE_COUNT; i++) {
            if (!columnVisibility[i]) continue;
            const cell = row.children[i];
            const originalText = cell.innerText.trim();
            const val = parseFloat(originalText);

            // Save original for restoration
            if (!cell.dataset.original) {
              cell.dataset.original = originalText;
            }

            // Logic
            if (originalText === '') {
               // Leave blank
            } else if (originalText === '-') {
               cell.innerHTML = '<span class="text-2xl leading-none">💀</span>'; // Skull for crash/issue
            } else if (!isNaN(val)) {
               // Swapped order: Check Max first. If min == max (all equal), everyone is a winner 🏆
               let emoji = '';
               if (val === maxVal) {
                 emoji = '🏆'; // Trophy for highest
               } else if (val === minVal) {
                 emoji = '💩'; // Poop for lowest
               } else {
                 // Calculate relative performance
                 const t = (val - minVal) / range;
                 if (t < 0.33) {
                   emoji = '😐'; // Neutral (Low)
                 } else if (t < 0.66) {
                   emoji = '😊'; // Happy (Mid)
                 } else {
                   emoji = '😆'; // Very Happy (High)
                 }
               }
               cell.innerHTML = `<span class="text-2xl leading-none">${emoji}</span>`;
            }
          }
        });
      }

      function updateGameNamesForMiniMode() {
        const rows = document.querySelectorAll('.rr-table tbody tr');
        rows.forEach(row => {
          const cell = row.children[0]; // First cell is the game name
          
          // Store original full name if not already stored
          if (!cell.dataset.fullName) {
            cell.dataset.fullName = cell.innerText.trim();
          }

          if (miniModeOn) {
            const originalName = cell.dataset.fullName;
            if (originalName === 'Monster Boy and the Cursed Kingdom') {
              cell.innerText = 'Monster Boy';
            } else if (originalName === 'Captain Toad: Treasure Tracker') {
              cell.innerText = 'Captain Toad';
            } else if (originalName.startsWith('The Legend of Zelda: ')) {
              cell.innerText = originalName.replace('The Legend of Zelda: ', '');
            }
          } else {
            // Restore full name
            if (cell.dataset.fullName) {
              cell.innerText = cell.dataset.fullName;
            }
          }
        });
      }

      // Mode Toggles
      modeButtons.forEach(btn => {
        btn.addEventListener('click', () => {
          modeButtons.forEach(b => {
            b.className = 'mode-toggle px-4 py-2 rounded pixel-btn retro-font text-xs bg-gray-700 text-gray-300 hover:bg-gray-600';
          });

          const mode = btn.dataset.mode;
          let activeClass = '';

          if (mode === 'combined') {
            activeClass = 'bg-yellow-400 text-black shadow-lg ring-2 ring-yellow-300';
          } else if (mode === 'switch') {
            activeClass = 'bg-red-600 text-white shadow-lg ring-2 ring-red-400';
          } else if (mode === 'windows') {
            activeClass = 'bg-blue-600 text-white shadow-lg ring-2 ring-blue-400';
          }

          btn.className = `mode-toggle px-4 py-2 rounded pixel-btn retro-font text-xs ${activeClass}`;
          
          activeMode = mode;
          updateTableVisibility();
          
          if (highlightOn) applyHighlight();
          if (colorModeOn) applyColorMode();
          if (runsGreatOn) applyRunsGreat();
          if (emojiModeOn) applyEmojiMode();
          
          // Ensure name truncation persists across mode switches if mini mode is on
          if (miniModeOn) updateGameNamesForMiniMode();
        });
      });

      // Device Toggles
      deviceButtons.forEach(btn => {
        btn.addEventListener('click', () => {
          const idx = parseInt(btn.dataset.colIndex);
          const isOn = !btn.classList.contains('off');
          
          if (isOn) {
            btn.classList.add('off', 'border-gray-700', 'text-gray-600');
            btn.classList.remove('on', 'border-gray-600', 'bg-gray-900');
            btn.querySelector('span').style.backgroundColor = '#374151';
            columnVisibility[idx] = false;
          } else {
            btn.classList.remove('off', 'border-gray-700', 'text-gray-600');
            btn.classList.add('on', 'border-gray-600', 'bg-gray-900');
            const colors = [
              '',
              'bg-green-500',
              'bg-yellow-400',
              'bg-blue-400',
              'bg-orange-400',
              'bg-pink-400',
              'bg-purple-400',
              'bg-cyan-400'
            ];
            btn.querySelector('span').style.backgroundColor = '';
            btn.querySelector('span').className = `w-2 h-2 rounded-full ${colors[idx]}`;
            columnVisibility[idx] = true;
          }
          updateColumnVisibility();
        });
      });

      // Highlight Button
      highlightBtn.addEventListener('click', () => {
        highlightOn = !highlightOn;
        colorModeOn = false;
        runsGreatOn = false;
        emojiModeOn = false; // Turn off emoji
        
        colorBtn.classList.remove('bg-fuchsia-500', 'text-black', 'shadow-lg');
        colorBtn.classList.add('border-fuchsia-500', 'text-fuchsia-400');

        runsBtn.classList.remove('bg-green-500', 'text-black', 'shadow-lg');
        runsBtn.classList.add('border-green-400', 'text-green-300');

        emojiBtn.classList.remove('bg-yellow-500', 'text-black', 'shadow-lg');
        emojiBtn.classList.add('border-yellow-500', 'text-yellow-400');

        if (highlightOn) {
          applyHighlight();
          highlightBtn.classList.add('bg-emerald-500', 'text-black', 'shadow-lg');
          highlightBtn.classList.remove('border-emerald-500', 'text-emerald-400');
        } else {
          clearEffects();
          highlightBtn.classList.remove('bg-emerald-500', 'text-black', 'shadow-lg');
          highlightBtn.classList.add('border-emerald-500', 'text-emerald-400');
        }
      });

      // Heatmap / Color Button
      colorBtn.addEventListener('click', () => {
        colorModeOn = !colorModeOn;
        highlightOn = false; 
        runsGreatOn = false;
        emojiModeOn = false;

        highlightBtn.classList.remove('bg-emerald-500', 'text-black', 'shadow-lg');
        highlightBtn.classList.add('border-emerald-500', 'text-emerald-400');

        runsBtn.classList.remove('bg-green-500', 'text-black', 'shadow-lg');
        runsBtn.classList.add('border-green-400', 'text-green-300');

        emojiBtn.classList.remove('bg-yellow-500', 'text-black', 'shadow-lg');
        emojiBtn.classList.add('border-yellow-500', 'text-yellow-400');

        if (colorModeOn) {
          applyColorMode();
          colorBtn.classList.add('bg-fuchsia-500', 'text-black', 'shadow-lg');
          colorBtn.classList.remove('border-fuchsia-500', 'text-fuchsia-400');
        } else {
          clearEffects();
          colorBtn.classList.remove('bg-fuchsia-500', 'text-black', 'shadow-lg');
          colorBtn.classList.add('border-fuchsia-500', 'text-fuchsia-400');
        }
      });

      // Runs Great Button
      runsBtn.addEventListener('click', () => {
        runsGreatOn = !runsGreatOn;
        highlightOn = false;
        colorModeOn = false;
        emojiModeOn = false;

        highlightBtn.classList.remove('bg-emerald-500', 'text-black', 'shadow-lg');
        highlightBtn.classList.add('border-emerald-500', 'text-emerald-400');

        colorBtn.classList.remove('bg-fuchsia-500', 'text-black', 'shadow-lg');
        colorBtn.classList.add('border-fuchsia-500', 'text-fuchsia-400');

        emojiBtn.classList.remove('bg-yellow-500', 'text-black', 'shadow-lg');
        emojiBtn.classList.add('border-yellow-500', 'text-yellow-400');

        if (runsGreatOn) {
          applyRunsGreat();
          runsBtn.classList.add('bg-green-500', 'text-black', 'shadow-lg');
          runsBtn.classList.remove('border-green-400', 'text-green-300');
        } else {
          clearEffects();
          runsBtn.classList.remove('bg-green-500', 'text-black', 'shadow-lg');
          runsBtn.classList.add('border-green-400', 'text-green-300');
        }
      });

      // Emoji Mode Button logic
      emojiBtn.addEventListener('click', () => {
        emojiModeOn = !emojiModeOn;
        // Disable others
        highlightOn = false;
        colorModeOn = false;
        runsGreatOn = false;

        // Reset other buttons UI
        highlightBtn.classList.remove('bg-emerald-500', 'text-black', 'shadow-lg');
        highlightBtn.classList.add('border-emerald-500', 'text-emerald-400');

        colorBtn.classList.remove('bg-fuchsia-500', 'text-black', 'shadow-lg');
        colorBtn.classList.add('border-fuchsia-500', 'text-fuchsia-400');

        runsBtn.classList.remove('bg-green-500', 'text-black', 'shadow-lg');
        runsBtn.classList.add('border-green-400', 'text-green-300');

        if (emojiModeOn) {
          applyEmojiMode();
          emojiBtn.classList.add('bg-yellow-500', 'text-black', 'shadow-lg');
          emojiBtn.classList.remove('border-yellow-500', 'text-yellow-400');
        } else {
          clearEffects();
          emojiBtn.classList.remove('bg-yellow-500', 'text-black', 'shadow-lg');
          emojiBtn.classList.add('border-yellow-500', 'text-yellow-400');
        }
      });

      // Mini Mode
      miniBtn.addEventListener('click', () => {
        miniModeOn = !miniModeOn;
        if (miniModeOn) {
          benchCard.classList.add('mini-mode');
          miniBtn.classList.add('bg-sky-500', 'text-black', 'shadow-lg');
          miniBtn.classList.remove('border-sky-500', 'text-sky-400');
        } else {
          benchCard.classList.remove('mini-mode');
          miniBtn.classList.remove('bg-sky-500', 'text-black', 'shadow-lg');
          miniBtn.classList.add('border-sky-500', 'text-sky-400');
        }
        updateGameNamesForMiniMode(); // Update text
      });

      // Sorting Logic
      document.querySelectorAll('th.sortable').forEach(th => {
        th.addEventListener('click', function() {
          const table = th.closest('table');
          const tbody = table.querySelector('tbody');
          const rowsArray = Array.from(tbody.rows);
          const colIndex = Array.from(th.parentNode.children).indexOf(th);
          const isAsc = th.dataset.sortDir === 'asc';
          
          table.querySelectorAll('th').forEach(h => h.removeAttribute('data-sort-dir'));
          th.dataset.sortDir = isAsc ? 'desc' : 'asc';
          
          rowsArray.sort((a, b) => {
            // Smart sorting: use dataset.original if present (Emo mode), else innerText
            const cellA = a.children[colIndex];
            const cellB = b.children[colIndex];

            const valA = cellA.dataset.original || cellA.innerText.trim();
            const valB = cellB.dataset.original || cellB.innerText.trim();
            
            const numA = parseFloat(valA);
            const numB = parseFloat(valB);
            
            if (!isNaN(numA) && !isNaN(numB)) {
              return isAsc ? numB - numA : numA - numB;
            } else {
              return isAsc ? valB.localeCompare(valA) : valA.localeCompare(valB);
            }
          });
          
          tbody.append(...rowsArray);
        });
      });

      // Auto-enable mini-mode on small screens
      if (window.innerWidth < 768) {
        miniModeOn = true;
        benchCard.classList.add('mini-mode');
        miniBtn.classList.add('bg-sky-500', 'text-black', 'shadow-lg');
        miniBtn.classList.remove('border-sky-500', 'text-sky-400');
        updateGameNamesForMiniMode();
      }

      // Init
      updateTableVisibility();
      updateColumnVisibility();
    });
  </script>
</body>
</html>
