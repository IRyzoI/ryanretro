<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nintendo Switch Compatibility | Ryan Retro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Roboto:wght@400;700&display=swap');
        .retro-font { font-family: 'Press Start 2P', cursive; }
        .pixel-border { border: 4px solid #000; box-shadow: 8px 8px 0 rgba(0,0,0,0.2); }
        .perf-perfect { color: #4ade80; } /* text-green-400 */
        .perf-great { color: #38bdf8; } /* text-sky-400 */
        .perf-good { color: #facc15; } /* text-yellow-400 */
        .perf-playable { color: #fb923c; } /* text-orange-400 */
        .perf-unplayable { color: #f87171; } /* text-red-400 */
        .form-input {
            background-color: #374151; border: 2px solid #1f2937;
            border-radius: 0.25rem; padding: 0.5rem 0.75rem;
            color: #d1d5db; width: 100%; transition: border-color 0.2s;
        }
        .form-input:focus { outline: none; border-color: #facc15; }
    </style>
</head>
<body class="bg-gray-900 text-white">
    <header class="bg-black py-6">
        <div class="container mx-auto px-4">
            <a href="index.html" class="flex items-center">
                <img src="http://static.photos/gaming/100x100/42" alt="Ryan Retro Logo" class="w-12 h-12 rounded-full mr-4">
                <span class="retro-font text-yellow-400 text-xl">RYAN RETRO</span>
            </a>
        </div>
    </header>

    <main class="py-12">
        <div class="container mx-auto px-4">
            <div class="max-w-6xl mx-auto">
                <div class="flex items-center mb-8">
                    <span class="bg-red-500 text-black text-xs px-2 py-1 rounded retro-font mr-4">COMPATIBILITY</span>
                    <h1 class="retro-font text-3xl md:text-4xl">Nintendo Switch</h1>
                </div>

                <div class="bg-gray-800 rounded-lg overflow-hidden pixel-border mb-8">
                    <img src="http://static.photos/gaming/1200x630/7" alt="Nintendo Switch" class="w-full h-96 object-cover">
                </div>

                <div class="bg-gray-800 p-8 rounded-lg pixel-border mb-12">
                    <h2 class="retro-font text-2xl mb-6">Performance Overview</h2>
                    <div class="prose prose-invert max-w-none">
                        <p class="mb-4">The Nintendo Switch emulation scene has made significant progress in recent years, with many games now playable on powerful Android handhelds like the Retroid Pocket 5.</p>
                        <p class="mb-4">Performance varies greatly depending on the game, with simpler 2D titles running at full speed while more demanding 3D games may require frame skips or resolution scaling.</p>
                        <p>Key factors affecting performance include the emulator used (Skyline vs Yuzu), driver compatibility, and the specific game's requirements.</p>
                    </div>
                </div>
                <div class="bg-gray-800 p-8 rounded-lg pixel-border mb-12">
                    <h2 class="retro-font text-2xl mb-6">Recommended Settings</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h3 class="text-lg font-bold mb-2 text-red-400">Skyline Emulator</h3>
                            <ul class="space-y-2 text-sm text-gray-300">
                                <li>• Use Turnip drivers for best compatibility</li>
                                <li>• Enable ASTC texture compression</li>
                                <li>• Set GPU clock speed to 75% for battery life</li>
                                <li>• Disable VSync for performance boost</li>
                            </ul>
                        </div>
                        <div>
                            <h3 class="text-lg font-bold mb-2 text-blue-400">Yuzu Android</h3>
                            <ul class="space-y-2 text-sm text-gray-300">
                                <li>• Use Mesa Turnip drivers</li>
                                <li>• Set resolution to 0.75x</li>
                                <li>• Enable asynchronous shader compilation</li>
                                <li>• Disable GPU cache for stability</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="bg-gray-800 p-8 rounded-lg pixel-border mb-12">
                    <h2 class="retro-font text-2xl mb-6">Community Compatibility List</h2>
                    
                    <div class="mb-6">
                        <input type="text" id="game-search-box" class="form-input" placeholder="Search for a game...">
                    </div>

                    <div class="overflow-x-auto">
                        <table class="min-w-full text-sm text-left text-gray-300" id="compatibility-table">
                            <thead class="bg-gray-700 text-gray-100 retro-font text-xs uppercase tracking-wider">
                                <tr>
                                    <th class="p-3">Game</th>
                                    <th class="p-3">Performance</th>
                                    <th class="p-3">Driver</th>
                                    <th class="p-3">Emulator</th>
                                    <th class="p-3">Update</th>
                                    <th class="p-3 min-w-[300px]">Notes</th>
                                    <th class="p-3">Date Added</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-700 align-baseline">
                            </tbody>
                        </table>
                    </div>
                    <div class="text-center mt-6">
                        <button id="add-entry-btn" class="bg-yellow-400 hover:bg-yellow-500 text-black px-6 py-3 rounded retro-font text-sm inline-block pixel-border border-2">
                            ADD YOUR ENTRY
                        </button>
                    </div>
                </div>

                <div id="add-entry-form-container" class="bg-gray-800 p-8 rounded-lg pixel-border mb-12 hidden" data-aos="fade-up">
                    <h2 class="retro-font text-2xl mb-6 text-yellow-400">Add New Compatibility Entry</h2>
                    <form id="compatibility-form">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <div>
                                <label for="game-name" class="block mb-2 text-sm font-bold text-gray-300">Game Name</label>
                                <input type="text" id="game-name" class="form-input" required>
                            </div>
                            <div>
                                <label for="performance" class="block mb-2 text-sm font-bold text-gray-300">Performance</label>
                                <select id="performance" class="form-input" required>
                                    <option value="Perfect">Perfect</option>
                                    <option value="Great">Great</option>
                                    <option value="Good">Good</option>
                                    <option value="Playable">Playable</option>
                                    <option value="Unplayable">Unplayable</option>
                                </select>
                            </div>
                            <div>
                                <label for="driver" class="block mb-2 text-sm font-bold text-gray-300">Driver</label>
                                <input type="text" id="driver" class="form-input">
                            </div>
                            <div>
                                <label for="emulator" class="block mb-2 text-sm font-bold text-gray-300">Emulator</label>
                                <input type="text" id="emulator" class="form-input">
                            </div>
                            <div>
                                <label for="update" class="block mb-2 text-sm font-bold text-gray-300">Game Update / Version</label>
                                <input type="text" id="update" class="form-input" value="1.0">
                            </div>
                        </div>
                        <div class="mb-6">
                             <label for="notes" class="block mb-2 text-sm font-bold text-gray-300">Notes</label>
                             <textarea id="notes" rows="3" class="form-input"></textarea>
                        </div>
                        <div class="flex items-center justify-end gap-4">
                            <button type="button" id="cancel-btn" class="bg-gray-600 hover:bg-gray-500 text-white px-6 py-3 rounded retro-font text-sm">CANCEL</button>
                            <button type="submit" class="bg-green-500 hover:bg-green-600 text-black px-6 py-3 rounded retro-font text-sm pixel-border border-2">SUBMIT ENTRY</button>
                        </div>
                    </form>
                </div>
                <div class="flex justify-center">
                    <a href="index.html#games" class="bg-gray-700 hover:bg-gray-600 text-white px-8 py-3 rounded retro-font text-sm">
                        BACK TO DEVICES
                    </a>
                </div>
            </div>
        </div>
    </main>

    <footer class="bg-black py-8">
        <div class="container mx-auto px-4 text-center text-gray-500 text-sm">
            <p>© 2023 Ryan Retro. All rights reserved.</p>
        </div>
    </footer>

    <script>
        AOS.init();

        // --- GAME DATA ---
        // In a real application, you might load this from a separate JSON file.
        // For now, we'll keep it here. You can add 1000+ items to this array.
        const initialGames = [
            { name: "Mario Kart 8 Deluxe", performance: "Perfect", driver: "Qualcom 819.2", emulator: "Eden", update: "3.0.4", notes: "Set to docked mode for best clarity. Enable max clocks.", date: "2025/09/12" },
            { name: "Hollow Knight Silksong", performance: "Perfect", driver: "Turnip 25.3.0-R6", emulator: "Eden", update: "1.0", notes: "Perfect 60fps on latest Eden Legacy 0.0.3", date: "2025/09/05" },
            { name: "Crash Bandicoot N. Sane Trilogy", performance: "Perfect", driver: "Qualcom 819.2", emulator: "Yuzu", update: "1.0", notes: "", date: "2025/09/11" },
            { name: "The Legend Of Zelda: Tears Of The Kingdom", performance: "Great", driver: "Turnip 24.3.4", emulator: "Eden", update: "1.0", notes: "", date: "2025/08/06" },
            { name: "Persona 5 Royal", performance: "Perfect", driver: "Turnip 24.3.0 9v2", emulator: "Eden", update: "1.0", notes: "Use JIT mode to avoid crashes.", date: "2025/08/23" },
            { name: "Metroid Dread", performance: "Perfect", driver: "Mesa Turnip 23.2.0", emulator: "Citron", update: "1.0", notes: "Docked 60fps.", date: "2025/08/15" },
            { name: "13 Sentinels: Aegis Rim", performance: "Great", driver: "Turnip 24.1.0 R18", emulator: "Citron", update: "1.0", notes: "Docked, 1x resolution, some dips in FPS but no crashes.", date: "2025/02/25" },
            { name: "Animal Crossing New Horizons", performance: "Perfect", driver: "24.3.0 9v2", emulator: "Yuzu", update: "2.0.8", notes: "", date: "2025/08/05" },
            { name: "Dave The Diver", performance: "Perfect", driver: "Qualcomm 0.746.0", emulator: "Yuzu", update: "v1.0.4.1040", notes: "Stable 30 FPS in Docked Mode.", date: "2025/07/24" },
            { name: "A Hat In Time", performance: "Great", driver: "Qualcomm 0.746.0", emulator: "Yuzu", update: "1.0.4 + DLCs", notes: "Almost perfect in handheld mode but a few framerate dips", date: "2024/12/17" },
            { name: "8-bit Adventures 2", performance: "Great", driver: "Qualcomm 805", emulator: "Sudachi", update: "1.0", notes: "", date: "2025/08/13"},
            { name: "8-Bit Adventures 2", performance: "Unplayable", driver: "Turnip 24.3.0 9v2", emulator: "Citron", update: "1.0", notes: "Can't get this game to launch.", date: "2024/12/16"},
            // ... Add more games here
        ];

        document.addEventListener('DOMContentLoaded', function () {
            // --- Global State ---
            let allGames = []; // This will hold both initial and user-added games.

            // --- Element Selections ---
            const addEntryBtn = document.getElementById('add-entry-btn');
            const formContainer = document.getElementById('add-entry-form-container');
            const cancelBtn = document.getElementById('cancel-btn');
            const compatibilityForm = document.getElementById('compatibility-form');
            const tableBody = document.querySelector('#compatibility-table tbody');
            const searchBox = document.getElementById('game-search-box');

            // --- Utility Functions ---
            const performanceClassMap = {
                'Perfect': 'perf-perfect', 'Great': 'perf-great', 'Good': 'perf-good',
                'Playable': 'perf-playable', 'Unplayable': 'perf-unplayable'
            };

            // --- Core Logic ---

            /**
             * Renders a list of game objects into the table.
             * @param {Array} gamesToDisplay - The array of game objects to show.
             */
            function displayGames(gamesToDisplay) {
                tableBody.innerHTML = ''; // Clear the existing table
                
                // Sort games by date, newest first
                gamesToDisplay.sort((a, b) => new Date(b.date) - new Date(a.date));

                for (const game of gamesToDisplay) {
                    const perfClass = performanceClassMap[game.performance] || '';
                    const newRow = document.createElement('tr');
                    newRow.className = 'hover:bg-gray-700/50';
                    newRow.innerHTML = `
                        <td class="p-3 font-bold">${game.name}</td>
                        <td class="p-3 font-bold ${perfClass}">${game.performance}</td>
                        <td class="p-3">${game.driver}</td>
                        <td class="p-3">${game.emulator}</td>
                        <td class="p-3">${game.update}</td>
                        <td class="p-3">${game.notes}</td>
                        <td class="p-3">${game.date}</td>
                    `;
                    tableBody.appendChild(newRow);
                }
            }

            /**
             * Loads games from both the initial list and localStorage.
             */
            function loadAndDisplayGames() {
                // Get user-saved games from localStorage, or an empty array if none exist.
                const userAddedGames = JSON.parse(localStorage.getItem('userGameEntries')) || [];
                // Combine the initial hardcoded list with the user's saved list.
                allGames = [...userAddedGames, ...initialGames];
                displayGames(allGames);
            }

            /**
             * Saves a new game entry to localStorage and re-renders the table.
             * @param {Event} e The form submission event.
             */
            function handleFormSubmit(e) {
                e.preventDefault();

                const today = new Date();
                const dateString = `${today.getFullYear()}/${String(today.getMonth() + 1).padStart(2, '0')}/${String(today.getDate()).padStart(2, '0')}`;

                const newEntry = {
                    name: document.getElementById('game-name').value,
                    performance: document.getElementById('performance').value,
                    driver: document.getElementById('driver').value,
                    emulator: document.getElementById('emulator').value,
                    update: document.getElementById('update').value,
                    notes: document.getElementById('notes').value,
                    date: dateString
                };

                // Get the current list of user games, add the new one, then save back.
                const userAddedGames = JSON.parse(localStorage.getItem('userGameEntries')) || [];
                userAddedGames.push(newEntry);
                localStorage.setItem('userGameEntries', JSON.stringify(userAddedGames));
                
                // Reset and hide the form
                compatibilityForm.reset();
                formContainer.classList.add('hidden');
                
                // Reload all games to show the new entry at the top
                loadAndDisplayGames();
            }
            
            /**
             * Filters the displayed games based on the search box input.
             */
            function handleSearch() {
                const searchTerm = searchBox.value.toLowerCase();
                if (!searchTerm) {
                    displayGames(allGames); // If search is empty, show all games
                    return;
                }
                const filteredGames = allGames.filter(game => 
                    game.name.toLowerCase().includes(searchTerm)
                );
                displayGames(filteredGames);
            }

            // --- Event Listeners ---
            addEntryBtn.addEventListener('click', () => {
                formContainer.classList.remove('hidden');
                formContainer.scrollIntoView({ behavior: 'smooth', block: 'center' });
            });

            cancelBtn.addEventListener('click', () => {
                formContainer.classList.add('hidden');
            });

            compatibilityForm.addEventListener('submit', handleFormSubmit);
            searchBox.addEventListener('input', handleSearch);

            // --- Initial Load ---
            loadAndDisplayGames();
        });
    </script>
</body>
</html>