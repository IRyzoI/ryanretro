<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ryan Retro | Comparisons</title>
    
    <!-- Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@500;700;800&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

    <!-- Tailwind Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            bg: '#2D1B4E',        // Deep Soft Purple
                            card: '#432C7A',      // Lighter Grape
                            hover: '#5B3EA8',     // Bright Purple
                            accent: '#FFFFFF',    // Pure White
                            muted: '#D4BBFF',     // Soft Lavender Text
                            red: '#FF0000'        // YouTube Red
                        }
                    },
                    fontFamily: {
                        sans: ['"Plus Jakarta Sans"', 'sans-serif'],
                        mono: ['"JetBrains Mono"', 'monospace'],
                    }
                }
            }
        }
    </script>

    <style>
        /* Custom Scrollbar */
        .custom-scrollbar::-webkit-scrollbar { height: 8px; width: 8px; display: block; }
        .custom-scrollbar::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.2); border-radius: 10px; margin: 0 20px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.15); border-radius: 10px; transition: background 0.3s; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(255, 255, 255, 0.3); }

        /* Hide scrollbar for top selector */
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }

        /* Animations */
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        .animate-float { animation: float 6s ease-in-out infinite; }

        /* Bento Card Styles matching handheld.html */
        .bento-card {
            background: rgba(67, 44, 122, 0.6); /* brand-card with opacity */
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 32px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            overflow: hidden;
            position: relative;
            box-shadow: 0 8px 32px rgba(0,0,0,0.2); 
        }
        .bento-card:hover {
            transform: translateY(-4px);
            border-color: rgba(255, 255, 255, 0.3);
            box-shadow: 0 12px 40px rgba(0,0,0,0.3);
            background: rgba(67, 44, 122, 0.8);
        }

        /* Stats Pill */
        .stat-pill {
            background: rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.1);
            padding: 10px;
            border-radius: 16px;
            font-size: 11px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            gap: 4px;
            color: #D4BBFF; /* brand-muted */
            font-weight: 700;
            height: 100%;
            min-height: 70px;
            line-height: 1.2;
            transition: background 0.2s;
        }
        .stat-pill:hover {
            background: rgba(255,255,255,0.05);
            color: white;
        }
        .stat-pill i { width: 18px; height: 18px; margin-bottom: 2px; color: white; }

        /* Video Embed */
        .video-embed-container {
            width: 100%;
            aspect-ratio: 16/9;
            background: #000;
            border-radius: 16px;
            overflow: hidden;
            margin-top: 1rem;
            border: 1px solid rgba(255,255,255,0.1);
            position: relative;
        }
        .video-embed-container iframe { width: 100%; height: 100%; position: absolute; top:0; left:0; }

        /* Remove Button */
        .remove-btn {
            position: absolute;
            top: 12px;
            right: 12px;
            z-index: 50;
            background: rgba(0,0,0,0.4);
            border: 1px solid rgba(255,255,255,0.1);
            color: white;
            border-radius: 50%;
            width: 32px; 
            height: 32px;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        .remove-btn:hover { background: #FF0000; border-color: transparent; transform: rotate(90deg); }

        /* Selector Button */
        .device-selector-btn {
            padding: 10px 20px;
            border-radius: 12px;
            font-family: 'Plus Jakarta Sans', sans-serif;
            font-weight: 700;
            font-size: 13px;
            text-transform: uppercase;
            border: 1px solid rgba(255,255,255,0.1);
            background: rgba(0,0,0,0.3);
            color: #D4BBFF;
            transition: all 0.2s;
            white-space: nowrap;
            flex-shrink: 0;
        }
        .device-selector-btn:hover {
            background: white;
            color: #2D1B4E;
            transform: translateY(-2px);
        }
        .device-selector-btn.selected {
            background: #5B3EA8;
            border-color: #D4BBFF;
            color: white;
            box-shadow: 0 4px 15px rgba(91, 62, 168, 0.4);
        }

        /* Brand Filter Button */
        .brand-filter-btn {
            padding: 6px 14px;
            border-radius: 99px;
            font-family: 'Plus Jakarta Sans', sans-serif;
            font-weight: 700;
            font-size: 11px;
            text-transform: uppercase;
            border: 1px solid rgba(255,255,255,0.1);
            background: rgba(255,255,255,0.05);
            color: #D4BBFF;
            transition: all 0.2s;
            white-space: nowrap;
            flex-shrink: 0;
        }
        .brand-filter-btn:hover {
            background: rgba(255,255,255,0.15);
            color: white;
        }
        .brand-filter-btn.active {
            background: #FFFFFF;
            color: #2D1B4E;
            border-color: #FFFFFF;
        }
        
        /* Nav Pills */
        .nav-pill {
            padding: 8px 16px;
            border-radius: 999px;
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            color: rgba(255,255,255,0.7);
            transition: all 0.2s;
            border: 1px solid transparent;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .nav-pill:hover, .nav-pill.active {
            color: white;
            background: rgba(255,255,255,0.1);
            border-color: rgba(255,255,255,0.2);
        }
    </style>
</head>
<body class="bg-brand-bg text-brand-accent font-sans antialiased min-h-screen flex flex-col selection:bg-white selection:text-brand-bg">

    <div class="fixed top-0 left-0 w-full h-[600px] bg-gradient-to-b from-[#4c1d95]/40 to-transparent -z-10 pointer-events-none"></div>
    <div class="fixed top-[-200px] right-[-200px] w-[600px] h-[600px] bg-purple-600/20 rounded-full blur-[120px] -z-10"></div>

    <header class="sticky top-0 z-50 bg-brand-bg/95 backdrop-blur-sm border-b border-brand-card">
        <div class="container mx-auto px-4 lg:px-6 h-20 flex justify-between items-center">

            <a href="/" class="flex items-center gap-3 group shrink-0">
                <div class="w-10 h-10 rounded-full overflow-hidden border-2 border-white/20 group-hover:border-white transition-colors">
                    <img src="https://raw.githubusercontent.com/IRyzoI/ryanretro/refs/heads/main/images/ryanretrologo.jpg" class="w-full h-full object-cover">
                </div>
                <span class="font-bold text-lg tracking-tight hidden sm:block">Ryan Retro</span>
            </a>

            <!-- Desktop Nav (Alphabetical) -->
            <nav class="hidden lg:flex items-center gap-6 bg-brand-card/30 px-6 py-2 rounded-full border border-white/5">
                <a href="/benchmarks" class="text-sm font-bold text-brand-muted hover:text-white transition-colors">Benchmarks</a>
                <a href="/compatibility" class="text-sm font-bold text-white transition-colors">Comparisons</a>
                <a href="/gotw" class="text-sm font-bold text-brand-muted hover:text-white transition-colors">GOTW</a>
                <a href="/patrons" class="text-sm font-bold text-brand-muted hover:text-white transition-colors">Patrons</a>
                <a href="/reviews" class="text-sm font-bold text-brand-muted hover:text-white transition-colors">Reviews</a>
                <a href="/store" class="text-sm font-bold text-brand-muted hover:text-white transition-colors">Shop</a>
            </nav>

            <div class="flex items-center gap-4">
                <div class="hidden md:flex items-center gap-2 pr-4 border-r border-brand-card/50">
                    <a href="https://www.youtube.com/@RyanRetro" target="_blank" class="text-brand-muted hover:text-white transition-colors p-1"><i data-lucide="youtube" class="w-4 h-4"></i></a>
                    <a href="https://x.com/RyanRetroYT" target="_blank" class="text-brand-muted hover:text-white transition-colors p-1"><i data-lucide="twitter" class="w-4 h-4"></i></a>
                    <a href="https://www.instagram.com/ryanretroyoutube/" target="_blank" class="text-brand-muted hover:text-white transition-colors p-1"><i data-lucide="instagram" class="w-4 h-4"></i></a>
                    <a href="https://www.tiktok.com/@ryanretroyoutube" target="_blank" class="text-brand-muted hover:text-white transition-colors p-1">
                        <svg viewBox="0 0 24 24" class="w-4 h-4 fill-current"><path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z"/></svg>
                    </a>
                    <a href="https://discord.gg/RAenS43UV9" target="_blank" class="text-brand-muted hover:text-white transition-colors p-1"><i data-lucide="message-circle" class="w-4 h-4"></i></a>
                    <a href="https://www.facebook.com/RyanRetroYT" target="_blank" class="text-brand-muted hover:text-white transition-colors p-1"><i data-lucide="facebook" class="w-4 h-4"></i></a>
                    <a href="https://www.threads.com/@ryanretroyoutube" target="_blank" class="text-brand-muted hover:text-white transition-colors p-1"><i data-lucide="at-sign" class="w-4 h-4"></i></a>
                </div>

                <button id="mobile-menu-btn" class="lg:hidden text-white p-2">
                    <i data-lucide="menu" class="w-6 h-6"></i>
                </button>
            </div>
        </div>
        
        <!-- Mobile Menu (Alphabetical) -->
        <div id="mobile-menu" class="hidden lg:hidden bg-brand-card border-t border-brand-hover absolute w-full left-0 top-full p-4 flex flex-col gap-4 shadow-xl z-50">
             <div class="grid grid-cols-2 gap-2">
                 <a href="/benchmarks" class="p-3 bg-brand-bg rounded-md text-center text-sm font-bold text-white hover:bg-white/5">Benchmarks</a>
                 <a href="/compatibility" class="p-3 bg-brand-bg rounded-md text-center text-sm font-bold text-white hover:bg-white/5">Comparisons</a>
                 <a href="/gotw" class="p-3 bg-brand-bg rounded-md text-center text-sm font-bold text-white hover:bg-white/5">GOTW</a>
                 <a href="/patrons" class="p-3 bg-brand-bg rounded-md text-center text-sm font-bold text-white hover:bg-white/5">Patrons</a>
                 <a href="/reviews" class="p-3 bg-brand-bg rounded-md text-center text-sm font-bold text-white hover:bg-white/5">Reviews</a>
                 <a href="/store" class="p-3 bg-brand-bg rounded-md text-center text-sm font-bold text-white hover:bg-white/5">Shop</a>
             </div>
             
             <div class="flex justify-center flex-wrap gap-4 pt-4 border-t border-white/10">
                 <a href="https://www.youtube.com/@RyanRetro" class="text-brand-muted hover:text-white"><i data-lucide="youtube" class="w-5 h-5"></i></a>
                 <a href="https://x.com/RyanRetroYT" class="text-brand-muted hover:text-white"><i data-lucide="twitter" class="w-5 h-5"></i></a>
                 <a href="https://www.instagram.com/ryanretroyoutube/" class="text-brand-muted hover:text-white"><i data-lucide="instagram" class="w-5 h-5"></i></a>
                 <a href="https://www.tiktok.com/@ryanretroyoutube" class="text-brand-muted hover:text-white"><svg viewBox="0 0 24 24" class="w-5 h-5 fill-current"><path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z"/></svg></a>
                 <a href="https://discord.gg/RAenS43UV9" class="text-brand-muted hover:text-white"><i data-lucide="message-circle" class="w-5 h-5"></i></a>
                 <a href="https://www.facebook.com/RyanRetroYT" class="text-brand-muted hover:text-white"><i data-lucide="facebook" class="w-5 h-5"></i></a>
                 <a href="https://www.threads.com/@ryanretroyoutube" class="text-brand-muted hover:text-white"><i data-lucide="at-sign" class="w-5 h-5"></i></a>
             </div>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8 pb-20 max-w-7xl flex-grow">

        <!-- Header Section -->
        <div class="text-center mb-8" data-aos="fade-down">
            <h1 class="font-sans font-extrabold text-4xl md:text-6xl text-white mb-2 tracking-tight drop-shadow-xl">
                HEAD TO <span class="text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400">HEAD</span>
            </h1>
        </div>

        <!-- Sticky Selector with Brand Filters -->
        <div class="sticky top-20 z-40 bg-brand-bg/95 backdrop-blur-md py-4 border-b border-brand-card mb-8 -mx-4 px-4 shadow-2xl flex flex-col gap-3">
            <div class="max-w-7xl mx-auto w-full">
                <!-- Brand Filters -->
                <div id="brand-filters" class="flex gap-2 overflow-x-auto scrollbar-hide pb-2 border-b border-white/5 mb-2">
                    <!-- Brand Buttons Injected via JS -->
                </div>
                
                <!-- Device Selector -->
                <div id="device-selector" class="flex gap-3 overflow-x-auto scrollbar-hide w-full pb-1">
                    <!-- Device Buttons Injected via JS -->
                </div>
            </div>
        </div>

        <!-- Comparison Scrolling Container -->
        <div id="comparison-container" class="flex flex-nowrap gap-6 overflow-x-auto pb-12 pt-4 custom-scrollbar items-stretch px-2 snap-x">
            <!-- Cards injected via JS -->
            <div class="min-w-[320px] max-w-[320px] shrink-0 py-20 text-center text-brand-muted/50 border-2 border-dashed border-white/10 rounded-3xl mx-auto w-full flex items-center justify-center" data-aos="fade-up">
                <p class="font-sans font-bold text-xl">Select devices above to compare</p>
            </div>
        </div>

    </main>

    <footer class="bg-brand-bg border-t border-brand-card py-12 text-center">
        <div class="container mx-auto px-6">
            <div class="flex justify-center flex-wrap gap-6 mb-8">
                <a href="https://www.youtube.com/@RyanRetro" target="_blank" class="text-brand-muted hover:text-white transition-colors hover:scale-110 p-2 bg-brand-card/50 rounded-full"><i data-lucide="youtube" class="w-5 h-5"></i></a>
                <a href="https://x.com/RyanRetroYT" target="_blank" class="text-brand-muted hover:text-white transition-colors hover:scale-110 p-2 bg-brand-card/50 rounded-full"><i data-lucide="twitter" class="w-5 h-5"></i></a>
                <a href="https://www.instagram.com/ryanretroyoutube/" target="_blank" class="text-brand-muted hover:text-white transition-colors hover:scale-110 p-2 bg-brand-card/50 rounded-full"><i data-lucide="instagram" class="w-5 h-5"></i></a>
                <a href="https://www.tiktok.com/@ryanretroyoutube" target="_blank" class="text-brand-muted hover:text-white transition-colors hover:scale-110 p-2 bg-brand-card/50 rounded-full"><svg viewBox="0 0 24 24" class="w-5 h-5 fill-current"><path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z"/></svg></a>
                <a href="https://discord.gg/RAenS43UV9" target="_blank" class="text-brand-muted hover:text-white transition-colors hover:scale-110 p-2 bg-brand-card/50 rounded-full"><i data-lucide="message-circle" class="w-5 h-5"></i></a>
                <a href="https://www.facebook.com/RyanRetroYT" target="_blank" class="text-brand-muted hover:text-white transition-colors hover:scale-110 p-2 bg-brand-card/50 rounded-full"><i data-lucide="facebook" class="w-5 h-5"></i></a>
                <a href="https://www.threads.com/@ryanretroyoutube" target="_blank" class="text-brand-muted hover:text-white transition-colors hover:scale-110 p-2 bg-brand-card/50 rounded-full"><i data-lucide="at-sign" class="w-5 h-5"></i></a>
            </div>
            <p class="text-xs text-brand-muted font-bold uppercase tracking-widest opacity-50">© 2026 Ryan Retro • All Rights Reserved</p>
        </div>
    </footer>

    <script>
        const IMG_BASE_URL = "https://raw.githubusercontent.com/IRyzoI/ryanretro/refs/heads/main/images/carousel/";

        // --- DATA CONFIGURATION ---
        const DEVICE_CONFIG = {
            "Anbernic RG34XX": {
                name: "Anbernic RG34XX",
                img: IMG_BASE_URL + "rg34xx.png",
                link: "https://s.click.aliexpress.com/e/_c3cp23I9",
                chipset: "Allwinner H700", screen: "3.4\" IPS 720x480", battery: "3500mAh", os: "Linux", ram: "1GB LPDDR4", storage: "Dual microSD",
                ytQuery: "anbernic rg34xx", hubLink: "/handheld?device=Anbernic RG34XX"
            },
            "Ayaneo Konkr Pocket Fit": {
                name: "Ayaneo Konkr Fit",
                img: IMG_BASE_URL + "konkr.png",
                link: "https://s.click.aliexpress.com/e/_c34ldFrn",
                chipset: "Snapdragon G3 Gen 3", screen: "6\" LCD 144Hz", battery: "8300mAh", os: "Android 14", ram: "8-16GB LPDDR5x", storage: "128GB UFS 3.1 / 256GB+",
                ytQuery: "ayaneo pocket fit", hubLink: "/handheld?device=Ayaneo Konkr Pocket Fit"
            },
            "AYN Odin 2 Portal": {
                name: "AYN Odin 2 Portal",
                img: IMG_BASE_URL + "portal.png",
                link: "https://www.ayntec.com/products/odin2-portal?sca_ref=8254425.fM33Fgl5td",
                chipset: "Snapdragon 8 Gen 2", screen: "7\" OLED 120Hz", battery: "8000mAh", os: "Android 13", ram: "8/12/16GB LPDDR5x", storage: "128/512GB/1TB UFS 4.0",
                ytQuery: "odin 2 portal", hubLink: "/handheld?device=Odin 2 Portal"
            },
            "AYN Odin 3": {
                name: "AYN Odin 3",
                img: IMG_BASE_URL + "odin3.png",
                link: "https://www.ayntec.com/products/ayn-odin-3?sca_ref=8254425.fM33Fgl5td",
                chipset: "Snapdragon 8 Elite", screen: "6\" AMOLED 120Hz", battery: "8000mAh", os: "Android 15", ram: "Up to 24GB LPDDR5x", storage: "Up to 1TB UFS 4.0",
                ytQuery: "ayn odin 3", hubLink: "/handheld?device=AYN Odin 3"
            },
            "GKD Pixel 2": {
                name: "GKD Pixel 2",
                img: IMG_BASE_URL + "pixel2.png",
                link: "#",
                chipset: "Rockchip RK3326S", screen: "2.4\" IPS 640x480", battery: "1800mAh", os: "Linux (IUX)", ram: "1GB DDR3", storage: "microSD",
                ytQuery: "gkd pixel 2", hubLink: "/handheld?device=GKD Pixel 2"
            },
            "MagicX XU20 V32": {
                name: "MagicX XU20",
                img: IMG_BASE_URL + "xuretroxu20v32.png",
                link: "#",
                chipset: "Allwinner A133 Plus", screen: "3.2\" IPS 1024x768", battery: "3200mAh", os: "Android 10", ram: "2GB DDR4", storage: "microSD",
                ytQuery: "magicx xu20", hubLink: "/handheld?device=MagicX XU20"
            },
            "MagicX Zero 40": {
                name: "MagicX Zero 40",
                img: IMG_BASE_URL + "magicxzero40.png",
                link: "#",
                chipset: "Allwinner A133 Plus", screen: "4\" IPS 480x800", battery: "4300mAh", os: "Android 10", ram: "2GB LPDDR4", storage: "64/128GB",
                ytQuery: "magicx zero 40", hubLink: "/handheld?device=MagicX Zero 40"
            },
            "Mangmi Air X": {
                name: "Mangmi Air X",
                img: IMG_BASE_URL + "mangmiairx.png",
                link: "https://mangmi.com/products/mangmi-air-x?sca_ref=9852375.YfyNu8ytC8akr",
                chipset: "Snapdragon 662", screen: "5.5\" IPS 1080p", battery: "5000mAh", os: "Android 14", ram: "4GB LPDDR4x", storage: "64GB eMMC",
                ytQuery: "mangmi air x", hubLink: "/handheld?device=Mangmi Air X"
            },
            "Retroid Pocket 5": {
                name: "Retroid Pocket 5",
                img: IMG_BASE_URL + "rp5.png",
                link: "https://www.goretroid.com/products/retroid-pocket-5-handheld?sca_ref=7339476.fIz7oKv7uT",
                chipset: "Snapdragon 865", screen: "5.5\" 1080p OLED", battery: "5000mAh", os: "Android 13", ram: "8GB LPDDR4x", storage: "128GB UFS 3.1",
                ytQuery: "retroid pocket 5", hubLink: "/handheld?device=Retroid Pocket 5"
            },
            "Retroid Pocket 6": {
                name: "Retroid Pocket 6",
                img: "https://huggingface.co/spaces/IRyzoI/RyanRetro/resolve/main/images/rp6.png",
                link: "https://www.goretroid.com/collections/retro-game-system/products/retroid-pocket-6-handheld?sca_ref=7339476.fIz7oKv7uT",
                chipset: "Snapdragon 8 Gen 2", screen: "5.5\" 1080p OLED", battery: "6000mAh", os: "Android 13", ram: "8/12GB LPDDR5x", storage: "128/256GB UFS 3.1",
                ytQuery: "retroid pocket 6", hubLink: "/handheld?device=Retroid Pocket 6"
            },
            "Retroid Pocket Classic": {
                name: "Retroid Pocket Classic",
                img: IMG_BASE_URL + "rpclassic.png",
                link: "https://www.goretroid.com/products/retroid-pocket-classic?sca_ref=7339476.fIz7oKv7uT",
                chipset: "Snapdragon G1 Gen 2", screen: "3.92\" OLED 1240x1080", battery: "5000mAh", os: "Android 14", ram: "4/6GB LPDDR4x", storage: "64/128GB eMMC 5.1",
                ytQuery: "retroid pocket classic", hubLink: "/handheld?device=Retroid Pocket Classic"
            },
            "Retroid Pocket Flip 2": {
                name: "Retroid Pocket Flip 2",
                img: IMG_BASE_URL + "flip2.png",
                link: "https://www.goretroid.com/products/retroid-pocket-flip-2?sca_ref=7339476.fIz7oKv7uT",
                chipset: "SD 865 / Dimensity 1100", screen: "5.5\" 1080p OLED", battery: "5000mAh", os: "Android 13", ram: "8GB LPDDR4x", storage: "128GB UFS 3.1",
                ytQuery: "retroid pocket flip 2", hubLink: "/handheld?device=Retroid Pocket Flip 2"
            },
            "Retroid Pocket G2": {
                name: "Retroid Pocket G2",
                img: IMG_BASE_URL + "rpg2.png",
                link: "https://www.goretroid.com/products/retroid-pocket-g2-handheld?sca_ref=7339476.fIz7oKv7uT",
                chipset: "Snapdragon G2 Gen 2", screen: "5.5\" 1080p OLED", battery: "5000mAh", os: "Android 15", ram: "8GB LPDDR4x", storage: "128GB UFS 3.1",
                ytQuery: "retroid pocket g2", hubLink: "/handheld?device=Retroid Pocket G2"
            },
            "Retroid Pocket Mini": {
                name: "Retroid Pocket Mini",
                img: IMG_BASE_URL + "rpmini.png",
                link: "https://www.goretroid.com/products/retroid-pocket-mini-v2-handheld?sca_ref=7339476.fIz7oKv7uT",
                chipset: "Snapdragon 865", screen: "3.7\" OLED 1280x960", battery: "4000mAh", os: "Android 13", ram: "6GB LPDDR4x", storage: "128GB UFS 3.1",
                ytQuery: "retroid pocket mini", hubLink: "/handheld?device=Retroid Pocket Mini"
            },
            "TrimUI Brick": {
                name: "TrimUI Brick",
                img: IMG_BASE_URL + "brick.png",
                link: "https://www.trimuistore.com/products/trimui-brick-retro-handheld-game-console?sca_ref=9846443.gwM5071BNJJv",
                chipset: "Allwinner A133 Plus", screen: "3.2\" IPS 1024x768", battery: "3000mAh", os: "Linux", ram: "2GB LPDDR3/4", storage: "8GB + microSD",
                ytQuery: "trimui brick", hubLink: "/handheld?device=TrimUI Brick"
            },
            "Vortex F5": {
                name: "Vortex F5",
                img: IMG_BASE_URL + "f5.png",
                link: "#",
                chipset: "RK3588", screen: "5\" IPS", battery: "5500 mAh", os: "Android", ram: "8GB", storage: "128GB",
                ytQuery: "vortex f5 handheld", hubLink: "/handheld?device=Vortex F5"
            }
        };

        // --- STATE ---
        let selectedKeys = ["Retroid Pocket 5", "Retroid Pocket Mini"]; 
        let activeBrand = 'All';

        // --- INIT ---
        document.addEventListener('DOMContentLoaded', () => {
            renderBrandFilters();
            renderSelector();
            renderContent();
            lucide.createIcons();
            
            // Mobile Menu Toggle Logic
            const menuBtn = document.getElementById('mobile-menu-btn');
            const menu = document.getElementById('mobile-menu');
            if (menuBtn && menu) {
                menuBtn.addEventListener('click', () => {
                    menu.classList.toggle('hidden');
                });
            }

            setTimeout(() => { AOS.init({ once: true, offset: 50 }); }, 50);
        });

        // --- BRAND FILTERS ---
        function renderBrandFilters() {
            const container = document.getElementById('brand-filters');
            container.innerHTML = '';
            
            // Extract Brands
            const brands = new Set(['All']);
            Object.keys(DEVICE_CONFIG).forEach(key => {
                const brand = key.split(' ')[0]; // Simple first word extraction
                brands.add(brand);
            });

            // Create Buttons
            brands.forEach(brand => {
                const btn = document.createElement('button');
                btn.className = `brand-filter-btn ${brand === activeBrand ? 'active' : ''}`;
                btn.textContent = brand;
                btn.onclick = () => {
                    activeBrand = brand;
                    renderBrandFilters(); // Re-render to update active class
                    renderSelector();     // Filter the device list
                };
                container.appendChild(btn);
            });
        }

        // --- RENDER SELECTOR (With Filter) ---
        function renderSelector() {
            const container = document.getElementById('device-selector');
            container.innerHTML = '';

            const keys = Object.keys(DEVICE_CONFIG).sort();
            
            keys.forEach(key => {
                const brand = key.split(' ')[0];
                if (activeBrand !== 'All' && brand !== activeBrand) return;

                const btn = document.createElement('button');
                const isSelected = selectedKeys.includes(key);
                btn.className = `device-selector-btn ${isSelected ? 'selected' : ''}`;
                btn.textContent = key;
                btn.onclick = () => toggleDevice(key);
                container.appendChild(btn);
            });
        }

        // --- TOGGLE LOGIC ---
        function toggleDevice(key) {
            if (selectedKeys.includes(key)) {
                selectedKeys = selectedKeys.filter(k => k !== key);
            } else {
                selectedKeys.push(key);
            }
            renderSelector();
            renderContent();
            
            lucide.createIcons();
            setTimeout(() => { AOS.refreshHard(); }, 100);
        }

        // --- RENDER CONTENT ---
        function renderContent() {
            const container = document.getElementById('comparison-container');
            container.innerHTML = '';

            if (selectedKeys.length === 0) {
                container.innerHTML = `
                    <div class="min-w-[320px] max-w-[320px] shrink-0 mx-auto py-20 text-center text-brand-muted/50 border-2 border-dashed border-white/10 rounded-3xl mx-auto w-full flex items-center justify-center" data-aos="fade-up">
                        <p class="font-sans font-bold text-xl">Select devices above to compare</p>
                    </div>`;
                return;
            }

            selectedKeys.forEach((key, index) => {
                const device = DEVICE_CONFIG[key];
                const delay = index * 50; 
                
                const cardHtml = `
                    <div class="min-w-[320px] max-w-[340px] shrink-0 snap-center" data-aos="fade-right" data-aos-delay="${delay}">
                        <div class="bento-card p-6 flex flex-col relative overflow-hidden h-full">
                            <button class="remove-btn" onclick="toggleDevice('${key}')"><i data-lucide="x" class="w-5 h-5"></i></button>

                            <a href="${device.hubLink}" class="block group cursor-pointer">
                                <div class="flex justify-between items-start mb-4 relative z-10 gap-4">
                                    <h3 class="font-sans font-extrabold text-2xl text-white uppercase leading-none drop-shadow-md group-hover:text-brand-muted transition-colors min-h-[3.2rem] flex items-center">
                                        ${device.name}
                                    </h3>
                                </div>

                                <div class="flex items-center justify-center py-6 relative z-10 h-40 w-full mb-4 bg-black/20 rounded-2xl border border-white/5">
                                    <img src="${device.img}" class="h-full w-full object-contain p-2 animate-float drop-shadow-2xl group-hover:scale-110 transition-transform duration-300" 
                                         alt="${device.name}"
                                         onerror="this.src='https://placehold.co/400x300/2a1b3d/FFF?text=No+Image';">
                                </div>
                            </a>

                            <div class="grid grid-cols-2 gap-2 mb-6 relative z-10">
                                <div class="stat-pill"><i data-lucide="cpu"></i> <span class="font-mono text-[10px] text-white">${device.chipset}</span></div>
                                <div class="stat-pill"><i data-lucide="monitor"></i> <span class="font-mono text-[10px] text-white">${device.screen}</span></div>
                                <div class="stat-pill"><i data-lucide="memory-stick"></i> <span class="font-mono text-[10px] text-white">${device.ram}</span></div>
                                <div class="stat-pill"><i data-lucide="hard-drive"></i> <span class="font-mono text-[10px] text-white">${device.storage}</span></div>
                                <div class="stat-pill"><i data-lucide="battery"></i> <span class="font-mono text-[10px] text-white">${device.battery}</span></div>
                                <div class="stat-pill"><i data-lucide="smartphone"></i> <span class="font-mono text-[10px] text-white">${device.os}</span></div>
                            </div>

                            <a href="${device.link}" target="_blank" class="w-full py-4 bg-white text-brand-bg font-bold rounded-xl flex items-center justify-center gap-2 hover:bg-brand-muted transition-colors relative z-10 shadow-lg mb-6">
                                <span>Buy Now</span> <i data-lucide="external-link" class="w-4 h-4"></i>
                            </a>

                            <div class="border-t border-white/10 pt-4 mt-auto">
                                <p class="text-[10px] font-bold text-brand-muted uppercase tracking-widest mb-2">Latest Video</p>
                                <div class="video-embed-container relative group cursor-pointer" id="video-${index}">
                                    <div class="absolute inset-0 flex items-center justify-center bg-black/40 group-hover:bg-black/20 transition-colors">
                                        <i data-lucide="loader" class="animate-spin w-8 h-8 text-white/50"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                const wrapper = document.createElement('div');
                wrapper.innerHTML = cardHtml.trim(); 
                container.appendChild(wrapper.firstElementChild);
                
                loadVideo(device, index);
            });
        }

        async function loadVideo(device, index) {
            const container = document.getElementById(`video-${index}`);
            
            // 1. Check for hardcoded ID in config (Future use)
            if (device.videoId) {
                embedYoutube(container, device.videoId);
                return;
            }

            // 2. Try API Fetch
            try {
                const res = await fetch(`/api/youtube/latest?channel_id=UCh9GxjM-FNuSWv7xqn3UKVw&q=${encodeURIComponent(device.ytQuery)}&limit=1`);
                if (res.ok) {
                    const data = await res.json();
                    const videoItem = Array.isArray(data) ? data[0] : data;
                    if (videoItem && videoItem.videoId) {
                        embedYoutube(container, videoItem.videoId);
                        return;
                    }
                }
            } catch (e) { 
                console.log("Video fetch failed/API unavailable, falling back to link", e); 
            }

            // 3. Fallback: Search Link Thumbnail
            const searchUrl = `https://www.youtube.com/results?search_query=${encodeURIComponent("Ryan Retro " + device.ytQuery)}`;
            
            container.innerHTML = `
                <a href="${searchUrl}" target="_blank" class="block w-full h-full relative group">
                    <img src="https://i.ytimg.com/vi/placeholder/hqdefault.jpg" 
                         class="w-full h-full object-cover opacity-60 group-hover:opacity-80 transition-opacity" 
                         onerror="this.src='https://placehold.co/600x400/2a1b3d/FFF?text=Watch+Review'" />
                    <div class="absolute inset-0 flex flex-col items-center justify-center">
                         <div class="w-10 h-10 bg-brand-red rounded-full flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform">
                            <i data-lucide="play" class="w-4 h-4 text-white fill-current ml-0.5"></i>
                         </div>
                         <span class="text-[10px] font-bold text-white mt-2 uppercase tracking-widest">Watch Review</span>
                    </div>
                </a>
            `;
            lucide.createIcons();
        }

        function embedYoutube(container, videoId) {
            container.innerHTML = `<iframe src="https://www.youtube.com/embed/${videoId}" title="YouTube video player" frameborder="0" allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen class="w-full h-full absolute inset-0"></iframe>`;
        }

    </script>
</body>
</html>
